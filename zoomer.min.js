!function(e,i,t,o){var n="zoomer";function m(i,t){this.elem=i,this.$elem=e(i),this.$elem_original=this.$elem,this.options=t,this.metadata=this.$elem.data(),this._init()}m.prototype={defaults:{zoomLevel:0,minZoom:0,maxZoom:20,zoomSpan:300,zoom:!1},lang:{textSelectAll:function(){return"Select all"}},_init:function(){this.config=e.extend({},this.defaults,this.options,this.metadata);var t=this;t._onImgLoad(t.$elem,function(o){var n=o.width,m=o.height,a=t.$elem.width(),l=t.$elem.height(),s=t.$elem.parent().width(),g=(t.$elem.parent().height(),t.$elem.css("width"));t.$elem.attr("width",n),t.$elem.attr("height",m);var r=a,h=l;t.equalWidth=!1,a>=s&&(t.equalWidth=!0,t.$elem.width(s),r=s),console.log(n+" - "+a+" - "+s+" - "+g);var c=e("<div class='zwrp' style='position:relative;overflow:hidden;'></div>");t.minWidth=t.$elem.width(),t.$elem.wrap(c),t.image=t.$elem,t.image.css("position","absolute"),t.image.css("max-width","none"),t.image.before("<div class='slider' style='position:absolute; z-index:1; width:20%;'><input style='width:100%; margin:0; padding:0;' type='range' min='"+t.config.minZoom+"' max='"+t.config.maxZoom+"' value='"+t.config.zoomLevel+"' /></div>"),t.$elem=t.image.closest("div"),t.$elem.width(r),t.$elem.height(h),t.imageOrigWidth=r,t.imageOrigHeight=h,e(i).resize(function(){t.$elem.closest("div");var e=t.$elem.parent().width();t.image.width(),t.$elem.offsetParent().width();console.log(a+" - "+e+" - "+g),t.equalWidth&&(t.image.css("width",e+"px"),t.$elem.css("width",e+"px"),t.$elem.css("height",t.image.height()),t.imageOrigWidth=t.image.width(),t.imageOrigHeight=t.image.height(),t.setZoom(0))}),t.zoomLevel=0,t.zoomCenter=!0;for(var u=t.config.zoomLevel>=t.config.minZoom?t.config.zoomLevel:t.config.minZoom,d=0;d<u;d++)t.zoomIn();return t._initEvents(),t})},_onImgLoad:function(e,i){var t=new Image;t.src=!!e[0].getAttribute&&e[0].getAttribute("src")||e[0].src,t.onload=function(){i(t)}},_zoom:function(e){var i=this,t=i.config.zoomSpan*e,o=t/2;i.zoomLevel=i.zoomLevel+e,"function"==typeof i.config.zoom&&i.config.zoom(i.zoomLevel);var n=i.image.width()+t,m="-="+o,a="-="+o;i._setZoom(n,a,m,i.zoomLevel)},_setZoom:function(e,i,t,o){var n=this;(n.image.width(e),n.zoomCenter&&o>0)&&(i="-"+(n.image.height()-n.imageOrigHeight)/2);n.image.css("margin-top",i+"px"),n.image.css("margin-left",t+"px"),n.zoomLevel=o,n.$elem.find(".slider input").val(n.zoomLevel)},setZoom:function(e){this.resetZoom();for(var i=0;i<e;i++)this.zoomIn()},resetZoom:function(){this._setZoom(this.imageOrigWidth,0,0,0)},zoomIn:function(){var e=this;e.zoomLevel<e.config.maxZoom&&(e._zoom(1),this.image.css("cursor","move"))},zoomOut:function(){var e=this;if(e.minWidth<e.image.width()&&e.zoomLevel>e.config.minZoom){e._zoom(-1);var i=1*e.image.css("margin-left").replace("px",""),t=1*e.image.css("margin-top").replace("px","");t>=0&&e.image.css("margin-top","0px"),i>=0&&e.image.css("margin-left","0px");var o=e.imageOrigWidth-e.image.width(),n=e.imageOrigHeight-e.image.height();i<=o&&e.image.css("margin-left",o+"px"),t<=n&&e.image.css("margin-top",n+"px"),0==e.zoomLevel&&(this.image.css("cursor","default"),e.zoomCenter=!0)}},slds:function(){var e=this;setInterval(function(){e.zoomIn()},1)},_initEvents:function(){var i=this;i.$elem.on("change",".slider input",function(i){e(this).val();return!1}),i.$elem.on("input",".slider input",function(t){var o=1*e(this).val();return o>i.zoomLevel?i.zoomIn():o<i.zoomLevel&&i.zoomOut(),console.log(o),!1}),i.image.on("dragstart",function(e){return i.zoomCenter=!1,!1}),i.image.bind("mousewheel DOMMouseScroll",function(e){e.preventDefault(),e.originalEvent.wheelDelta>0||e.originalEvent.detail<0?i.zoomIn():i.zoomOut()});var o=null;i.image.on("mousemove",function(e){o&&function(e,t,o,a){var l=e-n,s=t-m,g=i.imageOrigWidth-i.image.width(),r=i.imageOrigHeight-i.image.height();l<0&&l>g&&(i.elem.style.marginLeft=l+"px");s<0&&s>r&&(i.elem.style.marginTop=s+"px")}(e.pageX,e.pageY)});var n=null,m=null;i.image.on("mousedown",function(t){o=e(t.target);var a=1*i.image.css("margin-left").replace("px",""),l=1*i.image.css("margin-top").replace("px","");n=t.pageX-a,m=t.pageY-l}),e(t).on("mouseup",function(e){o=null,n=null,m=null})}},e.fn[n]=function(i){var t,a=arguments;return i===o||"object"==typeof i?this.each(function(){e.data(this,"plugin_"+n)||e.data(this,"plugin_"+n,new m(this,i))}):"string"==typeof i&&"_"!==i[0]&&"init"!==i?(this.each(function(){var o=e.data(this,"plugin_"+n);o instanceof m&&"function"==typeof o[i]&&(t=o[i].apply(o,Array.prototype.slice.call(a,1))),"destroy"===i&&e.data(this,"plugin_"+n,null)}),t!==o?t:this):void 0}}(jQuery,window,document);
