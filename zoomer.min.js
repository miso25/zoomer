!function(e,i,t,o){function n(i,t){this.elem=i,this.$elem=e(i),this.$elem_original=this.$elem,this.options=t,this.metadata=this.$elem.data(),this._init()}var m="zoomer";n.prototype={defaults:{zoomLevel:0,minZoom:0,maxZoom:20,zoomSpan:300,zoom:!1},lang:{textSelectAll:function(){return"Select all"}},_init:function(){this.config=e.extend({},this.defaults,this.options,this.metadata);var t=this;t._onImgLoad(t.$elem,function(o){var n=o.width,m=o.height,a=t.$elem.width(),l=t.$elem.height(),s=t.$elem.parent().width(),g=(t.$elem.parent().height(),t.$elem.css("width"));t.$elem.attr("width",n),t.$elem.attr("height",m);var r=a,h=l;t.equalWidth=!1,a>=s&&(t.equalWidth=!0,t.$elem.width(s),r=s),console.log(n+" - "+a+" - "+s+" - "+g);var c=e("<div class='zwrp' style='position:relative;overflow:hidden;'></div>");t.minWidth=t.$elem.width(),t.$elem.wrap(c),t.image=t.$elem,t.image.css("position","absolute"),t.image.css("max-width","none"),t.image.before("<div class='slider' style='position:absolute; z-index:1; width:20%;'><input style='width:100%; margin:0; padding:0;' type='range' min='"+t.config.minZoom+"' max='"+t.config.maxZoom+"' value='"+t.config.zoomLevel+"' /></div>"),t.$elem=t.image.closest("div"),t.$elem.width(r),t.$elem.height(h),t.imageOrigWidth=r,t.imageOrigHeight=h,e(i).resize(function(){{var e=(t.$elem.closest("div"),t.$elem.parent().width());t.image.width(),t.$elem.offsetParent().width()}console.log(a+" - "+e+" - "+g),t.equalWidth&&(t.image.css("width",e+"px"),t.$elem.css("width",e+"px"),t.$elem.css("height",t.image.height()),t.imageOrigWidth=t.image.width(),t.imageOrigHeight=t.image.height(),t.setZoom(0))}),t.zoomLevel=0,t.zoomCenter=!0;for(var u=t.config.zoomLevel>=t.config.minZoom?t.config.zoomLevel:t.config.minZoom,d=0;u>d;d++)t.zoomIn();return t._initEvents(),t})},_onImgLoad:function(e,i){var t=new Image;t.src=(e[0].getAttribute?e[0].getAttribute("src"):!1)||e[0].src,t.onload=function(){i(t)}},_zoom:function(e){var i=this,t=i.config.zoomSpan*e,o=t/2;i.zoomLevel=i.zoomLevel+e,"function"==typeof i.config.zoom&&i.config.zoom(i.zoomLevel);var n=i.image.width()+t,m="-="+o,a="-="+o;i._setZoom(n,a,m,i.zoomLevel)},_setZoom:function(e,i,t,o){var n=this;if(n.image.width(e),n.zoomCenter&&o>0){var m=(n.image.height()-n.imageOrigHeight)/2;i="-"+m}n.image.css("margin-top",i+"px"),n.image.css("margin-left",t+"px"),n.zoomLevel=o,n.$elem.find(".slider input").val(n.zoomLevel)},setZoom:function(e){var i=this;i.resetZoom();for(var t=0;e>t;t++)i.zoomIn()},resetZoom:function(){var e=this;e._setZoom(e.imageOrigWidth,0,0,0)},zoomIn:function(){var e=this;e.zoomLevel<e.config.maxZoom&&(e._zoom(1),this.image.css("cursor","move"))},zoomOut:function(){var e=this;if(e.minWidth<e.image.width()&&e.zoomLevel>e.config.minZoom){e._zoom(-1);var i=1*e.image.css("margin-left").replace("px",""),t=1*e.image.css("margin-top").replace("px","");t>=0&&e.image.css("margin-top","0px"),i>=0&&e.image.css("margin-left","0px");var o=e.imageOrigWidth-e.image.width(),n=e.imageOrigHeight-e.image.height();o>=i&&e.image.css("margin-left",o+"px"),n>=t&&e.image.css("margin-top",n+"px"),0==e.zoomLevel&&(this.image.css("cursor","default"),e.zoomCenter=!0)}},slds:function(){var e=this;setInterval(function(){e.zoomIn()},1)},_initEvents:function(){function i(e,i){var t=e-m,n=i-a,l=o.imageOrigWidth-o.image.width(),s=o.imageOrigHeight-o.image.height();0>t&&t>l&&(o.elem.style.marginLeft=t+"px"),0>n&&n>s&&(o.elem.style.marginTop=n+"px")}var o=this;o.$elem.on("change",".slider input",function(){e(this).val();return!1}),o.$elem.on("input",".slider input",function(){var i=1*e(this).val();return i>o.zoomLevel?o.zoomIn():i<o.zoomLevel&&o.zoomOut(),console.log(i),!1}),o.image.on("dragstart",function(){return o.zoomCenter=!1,!1}),o.image.bind("mousewheel DOMMouseScroll",function(e){e.preventDefault(),e.originalEvent.wheelDelta>0||e.originalEvent.detail<0?o.zoomIn():o.zoomOut()});var n=null;o.image.on("mousemove",function(e){n&&i(e.pageX,e.pageY)});var m=null,a=null;o.image.on("mousedown",function(i){n=e(i.target);var t=1*o.image.css("margin-left").replace("px",""),l=1*o.image.css("margin-top").replace("px","");m=i.pageX-t,a=i.pageY-l}),e(t).on("mouseup",function(){n=null,m=null,a=null})}},e.fn[m]=function(i){var t=arguments;if(i===o||"object"==typeof i)return this.each(function(){e.data(this,"plugin_"+m)||e.data(this,"plugin_"+m,new n(this,i))});if("string"==typeof i&&"_"!==i[0]&&"init"!==i){var a;return this.each(function(){var o=e.data(this,"plugin_"+m);o instanceof n&&"function"==typeof o[i]&&(a=o[i].apply(o,Array.prototype.slice.call(t,1))),"destroy"===i&&e.data(this,"plugin_"+m,null)}),a!==o?a:this}}}(jQuery,window,document);